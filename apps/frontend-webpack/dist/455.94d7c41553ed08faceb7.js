/*! For license information please see 455.94d7c41553ed08faceb7.js.LICENSE.txt */
(self.webpackChunkxss_blog_frontend_webpack=self.webpackChunkxss_blog_frontend_webpack||[]).push([[455],{3455:(n,r,e)=>{"use strict";e.r(r),e.d(r,{default:()=>D});var t=e(1575),a=e(3523),o=e(5048),l=(e(5341),e(5802)),i=e(5587);function c(n){return function(n){if(Array.isArray(n))return s(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,r){if(n){if("string"==typeof n)return s(n,r);var e={}.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?s(n,r):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(n,r){(null==r||r>n.length)&&(r=n.length);for(var e=0,t=Array(r);e<r;e++)t[e]=n[e];return t}function d(){var n,r,e="function"==typeof Symbol?Symbol:{},t=e.iterator||"@@iterator",a=e.toStringTag||"@@toStringTag";function o(e,t,a,o){var c=t&&t.prototype instanceof i?t:i,s=Object.create(c.prototype);return u(s,"_invoke",function(e,t,a){var o,i,c,s=0,d=a||[],u=!1,A={p:0,n:0,v:n,a:f,f:f.bind(n,4),d:function(r,e){return o=r,i=0,c=n,A.n=e,l}};function f(e,t){for(i=e,c=t,r=0;!u&&s&&!a&&r<d.length;r++){var a,o=d[r],f=A.p,p=o[2];e>3?(a=p===t)&&(c=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=n):o[0]<=f&&((a=e<2&&f<o[1])?(i=0,A.v=t,A.n=o[1]):f<p&&(a=e<3||o[0]>t||t>p)&&(o[4]=e,o[5]=t,A.n=p,i=0))}if(a||e>1)return l;throw u=!0,t}return function(a,d,p){if(s>1)throw TypeError("Generator is already running");for(u&&1===d&&f(d,p),i=d,c=p;(r=i<2?n:c)||!u;){o||(i?i<3?(i>1&&(A.n=-1),f(i,c)):A.n=c:A.v=c);try{if(s=2,o){if(i||(a="next"),r=o[a]){if(!(r=r.call(o,c)))throw TypeError("iterator result is not an object");if(!r.done)return r;c=r.value,i<2&&(i=0)}else 1===i&&(r=o.return)&&r.call(o),i<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=n}else if((r=(u=A.n<0)?c:e.call(t,A))!==l)break}catch(r){o=n,i=1,c=r}finally{s=1}}return{value:r,done:u}}}(e,a,o),!0),s}var l={};function i(){}function c(){}function s(){}r=Object.getPrototypeOf;var A=[][t]?r(r([][t]())):(u(r={},t,function(){return this}),r),f=s.prototype=i.prototype=Object.create(A);function p(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,s):(n.__proto__=s,u(n,a,"GeneratorFunction")),n.prototype=Object.create(f),n}return c.prototype=s,u(f,"constructor",s),u(s,"constructor",c),c.displayName="GeneratorFunction",u(s,a,"GeneratorFunction"),u(f),u(f,a,"Generator"),u(f,t,function(){return this}),u(f,"toString",function(){return"[object Generator]"}),(d=function(){return{w:o,m:p}})()}function u(n,r,e,t){var a=Object.defineProperty;try{a({},"",{})}catch(n){a=0}u=function(n,r,e,t){function o(r,e){u(n,r,function(n){return this._invoke(r,e,n)})}r?a?a(n,r,{value:e,enumerable:!t,configurable:!t,writable:!t}):n[r]=e:(o("next",0),o("throw",1),o("return",2))},u(n,r,e,t)}function A(n,r,e,t,a,o,l){try{var i=n[o](l),c=i.value}catch(n){return void e(n)}i.done?r(c):Promise.resolve(c).then(t,a)}function f(n){return function(){var r=this,e=arguments;return new Promise(function(t,a){var o=n.apply(r,e);function l(n){A(o,t,a,l,i,"next",n)}function i(n){A(o,t,a,l,i,"throw",n)}l(void 0)})}}var p={class:"admin-layout"},v={class:"admin-sidebar"},g={class:"admin-brand"},m={class:"admin-main"},b={class:"admin-content"},C={class:"page-header"},h={key:0,class:"feedback-table"},k={class:"feedback-preview"},E={key:1,class:"loading"},w={key:0,class:"feedback-detail"},y={class:"detail-row"},B={class:"detail-row"},x={class:"detail-row"},F={class:"detail-content"},_=["innerHTML"],S={key:1,class:"content-html"},L={key:0,class:"xss-warning"};const M={__name:"FeedbackList",setup:function(n){var r=(0,a.lq)(),e=(0,o.J)(),s=(0,t.KR)([]),u=(0,t.KR)(!0),A=(0,t.KR)(!1),M=(0,t.KR)(null),D=(0,t.EW)(function(){return r.path}),N=function(){var n=f(d().m(function n(){var r,e;return d().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,l.A.get("/admin/feedbacks?page=0&size=50");case 1:r=n.v,s.value=r.data.content||[],n.n=3;break;case 2:n.p=2,e=n.v,console.error("Failed to fetch feedbacks:",e),i.nk.error("加载反馈失败");case 3:return n.p=3,u.value=!1,n.f(3);case 4:return n.a(2)}},n,null,[[0,2,3,4]])}));return function(){return n.apply(this,arguments)}}(),j=function(){var n=f(d().m(function n(r){var e,t;return d().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,l.A.get("/admin/feedbacks/".concat(r.id));case 1:return e=n.v,M.value=e.data,A.value=!0,n.n=2,N();case 2:n.n=4;break;case 3:n.p=3,t=n.v,console.error("Failed to fetch feedback detail:",t),i.nk.error("加载反馈详情失败");case 4:return n.a(2)}},n,null,[[0,3]])}));return function(r){return n.apply(this,arguments)}}(),X=function(n){if(!n)return"";var r=n.replace(/<[^>]*>/g,"");return r.length>100?r.substring(0,100)+"...":r},R=function(n){return"NEW"===n.row.status?"new-feedback-row":""},W=function(n){return n?new Date(n).toLocaleString("zh-CN"):""};return(0,t.sV)(function(){N()}),function(n,r){var a=(0,t.g2)("Tools"),o=(0,t.g2)("el-icon"),l=(0,t.g2)("DataAnalysis"),i=(0,t.g2)("el-menu-item"),d=(0,t.g2)("ChatDotRound"),f=(0,t.g2)("HomeFilled"),N=(0,t.g2)("el-menu"),z=(0,t.g2)("el-table-column"),O=(0,t.g2)("el-tag"),T=(0,t.g2)("el-button"),H=(0,t.g2)("el-table"),P=(0,t.g2)("el-alert"),G=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.CE)("div",p,[(0,t.Lk)("aside",v,[(0,t.Lk)("div",g,[(0,t.bF)(o,{size:"32"},{default:(0,t.k6)(function(){return[(0,t.bF)(a)]}),_:1}),r[2]||(r[2]=(0,t.Lk)("h2",null,"管理后台",-1))]),(0,t.bF)(N,{"default-active":D.value,router:"","background-color":"#121826","text-color":"#E2E8F0","active-text-color":"#22D3EE"},{default:(0,t.k6)(function(){return[(0,t.bF)(i,{index:"/admin/dashboard"},{default:(0,t.k6)(function(){return[(0,t.bF)(o,null,{default:(0,t.k6)(function(){return[(0,t.bF)(l)]}),_:1}),r[3]||(r[3]=(0,t.Lk)("span",null,"仪表盘",-1))]}),_:1}),(0,t.bF)(i,{index:"/admin/feedbacks"},{default:(0,t.k6)(function(){return[(0,t.bF)(o,null,{default:(0,t.k6)(function(){return[(0,t.bF)(d)]}),_:1}),r[4]||(r[4]=(0,t.Lk)("span",null,"反馈管理",-1))]}),_:1}),(0,t.bF)(i,{index:"/",divided:""},{default:(0,t.k6)(function(){return[(0,t.bF)(o,null,{default:(0,t.k6)(function(){return[(0,t.bF)(f)]}),_:1}),r[5]||(r[5]=(0,t.Lk)("span",null,"返回前台",-1))]}),_:1})]}),_:1},8,["default-active"])]),(0,t.Lk)("main",m,[(0,t.Lk)("div",b,[(0,t.Lk)("div",C,[r[6]||(r[6]=(0,t.Lk)("h1",null,"反馈管理",-1)),(0,t.Lk)("span",{class:(0,t.C4)(["badge","vuln"===(0,t.R1)(e).xssMode?"badge-vuln":"badge-secure"])},(0,t.v_)((0,t.R1)(e).xssMode.toUpperCase())+" 模式 ",3)]),u.value?((0,t.uX)(),(0,t.CE)("div",E,c(r[8]||(r[8]=[(0,t.Lk)("div",{class:"spinner"},null,-1)])))):((0,t.uX)(),(0,t.CE)("div",h,[(0,t.bF)(H,{data:s.value,style:{width:"100%"},"row-class-name":R},{default:(0,t.k6)(function(){return[(0,t.bF)(z,{prop:"id",label:"ID",width:"80"}),(0,t.bF)(z,{prop:"email",label:"邮箱",width:"220"}),(0,t.bF)(z,{label:"内容","min-width":"300"},{default:(0,t.k6)(function(n){var r=n.row;return[(0,t.Lk)("div",k,(0,t.v_)(X(r.contentHtml)),1)]}),_:1}),(0,t.bF)(z,{prop:"status",label:"状态",width:"100"},{default:(0,t.k6)(function(n){var r=n.row;return[(0,t.bF)(O,{type:"NEW"===r.status?"danger":"success"},{default:(0,t.k6)(function(){return[(0,t.eW)((0,t.v_)("NEW"===r.status?"未读":"已读"),1)]}),_:2},1032,["type"])]}),_:1}),(0,t.bF)(z,{label:"提交时间",width:"180"},{default:(0,t.k6)(function(n){var r=n.row;return[(0,t.eW)((0,t.v_)(W(r.createdAt)),1)]}),_:1}),(0,t.bF)(z,{label:"操作",width:"120"},{default:(0,t.k6)(function(n){var e=n.row;return[(0,t.bF)(T,{type:"primary",size:"small",onClick:function(n){return j(e)}},{default:(0,t.k6)(function(){return c(r[7]||(r[7]=[(0,t.eW)(" 查看 ",-1)]))}),_:1},8,["onClick"])]}),_:1})]}),_:1},8,["data"])]))])]),(0,t.Q3)(" 反馈详情弹窗（场景 5 落点） "),(0,t.bF)(G,{modelValue:A.value,"onUpdate:modelValue":r[0]||(r[0]=function(n){return A.value=n}),title:"反馈详情",width:"700px",onClose:r[1]||(r[1]=function(n){return M.value=null})},{default:(0,t.k6)(function(){return[M.value?((0,t.uX)(),(0,t.CE)("div",w,[(0,t.Lk)("div",y,[r[9]||(r[9]=(0,t.Lk)("label",null,"邮箱：",-1)),(0,t.Lk)("span",null,(0,t.v_)(M.value.email),1)]),(0,t.Lk)("div",B,[r[10]||(r[10]=(0,t.Lk)("label",null,"提交时间：",-1)),(0,t.Lk)("span",null,(0,t.v_)(W(M.value.createdAt)),1)]),(0,t.Lk)("div",x,[r[11]||(r[11]=(0,t.Lk)("label",null,"状态：",-1)),(0,t.bF)(O,{type:"NEW"===M.value.status?"danger":"success"},{default:(0,t.k6)(function(){return[(0,t.eW)((0,t.v_)("NEW"===M.value.status?"未读":"已读"),1)]}),_:1},8,["type"])]),(0,t.Lk)("div",F,[r[12]||(r[12]=(0,t.Lk)("label",null,"反馈内容：",-1)),(0,t.Q3)(" 盲 XSS（场景 5）渲染点 "),"vuln"===(0,t.R1)(e).xssMode?((0,t.uX)(),(0,t.CE)("div",{key:0,class:"content-html",innerHTML:M.value.contentHtml},null,8,_)):((0,t.uX)(),(0,t.CE)("div",S,(0,t.v_)(M.value.contentHtml),1))]),"vuln"===(0,t.R1)(e).xssMode?((0,t.uX)(),(0,t.CE)("div",L,[(0,t.bF)(P,{title:"⚠️ XSS 盲点演示",type:"warning",closable:!1},{default:(0,t.k6)(function(){return c(r[13]||(r[13]=[(0,t.Lk)("p",null,"此内容来自用户提交的反馈，在 VULN 模式下未经过滤直接渲染。",-1),(0,t.Lk)("p",null,"如果用户提交了恶意脚本，管理员查看时会触发 XSS（盲 XSS）。",-1)]))}),_:1})])):(0,t.Q3)("v-if",!0)])):(0,t.Q3)("v-if",!0)]}),_:1},8,["modelValue"])])}}};e(3832);const D=(0,e(6262).A)(M,[["__scopeId","data-v-38f4392c"]])},3832:(n,r,e)=>{var t=e(4069);t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[n.id,t,""]]),t.locals&&(n.exports=t.locals),(0,e(534).A)("1444211e",t,!1,{})},4069:(n,r,e)=>{"use strict";e.r(r),e.d(r,{default:()=>i});var t=e(1354),a=e.n(t),o=e(6314),l=e.n(o)()(a());l.push([n.id,"\n.admin-layout[data-v-38f4392c] {\n  display: flex;\n  min-height: 100vh;\n  background: var(--color-bg-base);\n}\n.admin-sidebar[data-v-38f4392c] {\n  width: 250px;\n  background: var(--color-bg-card);\n  border-right: 1px solid var(--color-border);\n  padding: var(--spacing-lg);\n  position: fixed;\n  height: 100vh;\n  overflow-y: auto;\n}\n.admin-brand[data-v-38f4392c] {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-md);\n  padding: var(--spacing-lg);\n  margin-bottom: var(--spacing-xl);\n  color: var(--color-primary);\n}\n.admin-brand h2[data-v-38f4392c] {\n  font-size: 1.25rem;\n}\n.admin-main[data-v-38f4392c] {\n  flex: 1;\n  margin-left: 250px;\n  padding: var(--spacing-2xl);\n}\n.admin-content[data-v-38f4392c] {\n  max-width: 1400px;\n  margin: 0 auto;\n}\n.page-header[data-v-38f4392c] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: var(--spacing-2xl);\n}\n.page-header h1[data-v-38f4392c] {\n  font-size: 2.5rem;\n}\n.feedback-preview[data-v-38f4392c] {\n  color: var(--color-text-secondary);\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n[data-v-38f4392c] .new-feedback-row {\n  background: rgba(239, 68, 68, 0.05);\n}\n.feedback-detail[data-v-38f4392c] {\n  padding: var(--spacing-md);\n}\n.detail-row[data-v-38f4392c] {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-md);\n  margin-bottom: var(--spacing-md);\n  padding-bottom: var(--spacing-md);\n  border-bottom: 1px solid var(--color-border);\n}\n.detail-row label[data-v-38f4392c] {\n  font-weight: 600;\n  color: var(--color-text-secondary);\n  min-width: 100px;\n}\n.detail-content[data-v-38f4392c] {\n  margin-top: var(--spacing-lg);\n}\n.detail-content label[data-v-38f4392c] {\n  display: block;\n  font-weight: 600;\n  color: var(--color-text-secondary);\n  margin-bottom: var(--spacing-md);\n}\n.content-html[data-v-38f4392c] {\n  background: var(--color-bg-elevated);\n  padding: var(--spacing-lg);\n  border-radius: var(--radius-md);\n  line-height: 1.8;\n  color: var(--color-text-primary);\n  min-height: 100px;\n}\n.xss-warning[data-v-38f4392c] {\n  margin-top: var(--spacing-lg);\n}\n.xss-warning p[data-v-38f4392c] {\n  margin: var(--spacing-sm) 0;\n  font-size: 0.9rem;\n}\n","",{version:3,sources:["webpack://./src/pages/admin/FeedbackList.vue"],names:[],mappings:";AAiMA;EACE,aAAa;EACb,iBAAiB;EACjB,gCAAgC;AAClC;AAEA;EACE,YAAY;EACZ,gCAAgC;EAChC,2CAA2C;EAC3C,0BAA0B;EAC1B,eAAe;EACf,aAAa;EACb,gBAAgB;AAClB;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,sBAAsB;EACtB,0BAA0B;EAC1B,gCAAgC;EAChC,2BAA2B;AAC7B;AAEA;EACE,kBAAkB;AACpB;AAEA;EACE,OAAO;EACP,kBAAkB;EAClB,2BAA2B;AAC7B;AAEA;EACE,iBAAiB;EACjB,cAAc;AAChB;AAEA;EACE,aAAa;EACb,8BAA8B;EAC9B,mBAAmB;EACnB,iCAAiC;AACnC;AAEA;EACE,iBAAiB;AACnB;AAEA;EACE,kCAAkC;EAClC,gBAAgB;EAChB,uBAAuB;EACvB,mBAAmB;AACrB;AAEA;EACE,mCAAmC;AACrC;AAEA;EACE,0BAA0B;AAC5B;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,sBAAsB;EACtB,gCAAgC;EAChC,iCAAiC;EACjC,4CAA4C;AAC9C;AAEA;EACE,gBAAgB;EAChB,kCAAkC;EAClC,gBAAgB;AAClB;AAEA;EACE,6BAA6B;AAC/B;AAEA;EACE,cAAc;EACd,gBAAgB;EAChB,kCAAkC;EAClC,gCAAgC;AAClC;AAEA;EACE,oCAAoC;EACpC,0BAA0B;EAC1B,+BAA+B;EAC/B,gBAAgB;EAChB,gCAAgC;EAChC,iBAAiB;AACnB;AAEA;EACE,6BAA6B;AAC/B;AAEA;EACE,2BAA2B;EAC3B,iBAAiB;AACnB",sourcesContent:['<template>\r\n  <div class="admin-layout">\r\n    <aside class="admin-sidebar">\r\n      <div class="admin-brand">\r\n        <el-icon size="32"><Tools /></el-icon>\r\n        <h2>管理后台</h2>\r\n      </div>\r\n      <el-menu\r\n        :default-active="activeMenu"\r\n        router\r\n        background-color="#121826"\r\n        text-color="#E2E8F0"\r\n        active-text-color="#22D3EE">\r\n        <el-menu-item index="/admin/dashboard">\r\n          <el-icon><DataAnalysis /></el-icon>\r\n          <span>仪表盘</span>\r\n        </el-menu-item>\r\n        <el-menu-item index="/admin/feedbacks">\r\n          <el-icon><ChatDotRound /></el-icon>\r\n          <span>反馈管理</span>\r\n        </el-menu-item>\r\n        <el-menu-item index="/" divided>\r\n          <el-icon><HomeFilled /></el-icon>\r\n          <span>返回前台</span>\r\n        </el-menu-item>\r\n      </el-menu>\r\n    </aside>\r\n    \r\n    <main class="admin-main">\r\n      <div class="admin-content">\r\n        <div class="page-header">\r\n          <h1>反馈管理</h1>\r\n          <span class="badge" :class="configStore.xssMode === \'vuln\' ? \'badge-vuln\' : \'badge-secure\'">\r\n            {{ configStore.xssMode.toUpperCase() }} 模式\r\n          </span>\r\n        </div>\r\n        \r\n        <div v-if="!loading" class="feedback-table">\r\n          <el-table\r\n            :data="feedbacks"\r\n            style="width: 100%"\r\n            :row-class-name="getRowClassName">\r\n            <el-table-column prop="id" label="ID" width="80" />\r\n            <el-table-column prop="email" label="邮箱" width="220" />\r\n            <el-table-column label="内容" min-width="300">\r\n              <template #default="{ row }">\r\n                <div class="feedback-preview">{{ getPreview(row.contentHtml) }}</div>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop="status" label="状态" width="100">\r\n              <template #default="{ row }">\r\n                <el-tag :type="row.status === \'NEW\' ? \'danger\' : \'success\'">\r\n                  {{ row.status === \'NEW\' ? \'未读\' : \'已读\' }}\r\n                </el-tag>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label="提交时间" width="180">\r\n              <template #default="{ row }">\r\n                {{ formatDate(row.createdAt) }}\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label="操作" width="120">\r\n              <template #default="{ row }">\r\n                <el-button type="primary" size="small" @click="viewFeedback(row)">\r\n                  查看\r\n                </el-button>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </div>\r\n        \r\n        <div v-else class="loading">\r\n          <div class="spinner"></div>\r\n        </div>\r\n      </div>\r\n    </main>\r\n    \r\n    \x3c!-- 反馈详情弹窗（场景 5 落点） --\x3e\r\n    <el-dialog\r\n      v-model="showDetailDialog"\r\n      title="反馈详情"\r\n      width="700px"\r\n      @close="currentFeedback = null">\r\n      <div v-if="currentFeedback" class="feedback-detail">\r\n        <div class="detail-row">\r\n          <label>邮箱：</label>\r\n          <span>{{ currentFeedback.email }}</span>\r\n        </div>\r\n        <div class="detail-row">\r\n          <label>提交时间：</label>\r\n          <span>{{ formatDate(currentFeedback.createdAt) }}</span>\r\n        </div>\r\n        <div class="detail-row">\r\n          <label>状态：</label>\r\n          <el-tag :type="currentFeedback.status === \'NEW\' ? \'danger\' : \'success\'">\r\n            {{ currentFeedback.status === \'NEW\' ? \'未读\' : \'已读\' }}\r\n          </el-tag>\r\n        </div>\r\n        <div class="detail-content">\r\n          <label>反馈内容：</label>\r\n          \x3c!-- 盲 XSS（场景 5）渲染点 --\x3e\r\n          <div \r\n            v-if="configStore.xssMode === \'vuln\'" \r\n            class="content-html" \r\n            v-html="currentFeedback.contentHtml">\r\n          </div>\r\n          <div \r\n            v-else \r\n            class="content-html">\r\n            {{ currentFeedback.contentHtml }}\r\n          </div>\r\n        </div>\r\n        \r\n        <div v-if="configStore.xssMode === \'vuln\'" class="xss-warning">\r\n          <el-alert\r\n            title="⚠️ XSS 盲点演示"\r\n            type="warning"\r\n            :closable="false">\r\n            <p>此内容来自用户提交的反馈，在 VULN 模式下未经过滤直接渲染。</p>\r\n            <p>如果用户提交了恶意脚本，管理员查看时会触发 XSS（盲 XSS）。</p>\r\n          </el-alert>\r\n        </div>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\n// 管理后台 - 反馈列表与详情（场景 5：盲 XSS 落点）\r\nimport { ref, computed, onMounted } from \'vue\';\r\nimport { useRoute } from \'vue-router\';\r\nimport { useConfigStore } from \'@/stores/config\';\r\nimport { pure } from \'@/utils/xss\';\r\nimport axios from \'@/api/axios\';\r\nimport { ElMessage } from \'element-plus\';\r\n\r\nconst route = useRoute();\r\nconst configStore = useConfigStore();\r\n\r\nconst feedbacks = ref([]);\r\nconst loading = ref(true);\r\nconst showDetailDialog = ref(false);\r\nconst currentFeedback = ref(null);\r\n\r\nconst activeMenu = computed(() => route.path);\r\n\r\nconst fetchFeedbacks = async () => {\r\n  try {\r\n    const response = await axios.get(\'/admin/feedbacks?page=0&size=50\');\r\n    feedbacks.value = response.data.content || [];\r\n  } catch (error) {\r\n    console.error(\'Failed to fetch feedbacks:\', error);\r\n    ElMessage.error(\'加载反馈失败\');\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\nconst viewFeedback = async (feedback) => {\r\n  try {\r\n    const response = await axios.get(`/admin/feedbacks/${feedback.id}`);\r\n    currentFeedback.value = response.data;\r\n    showDetailDialog.value = true;\r\n    \r\n    // 刷新列表以更新『已读/未读』状态\r\n    await fetchFeedbacks();\r\n  } catch (error) {\r\n    console.error(\'Failed to fetch feedback detail:\', error);\r\n    ElMessage.error(\'加载反馈详情失败\');\r\n  }\r\n};\r\n\r\nconst getPreview = (html) => {\r\n  if (!html) return \'\';\r\n  const text = html.replace(/<[^>]*>/g, \'\');\r\n  return text.length > 100 ? text.substring(0, 100) + \'...\' : text;\r\n};\r\n\r\nconst getRowClassName = ({ row }) => {\r\n  return row.status === \'NEW\' ? \'new-feedback-row\' : \'\';\r\n};\r\n\r\nconst formatDate = (date) => {\r\n  if (!date) return \'\';\r\n  return new Date(date).toLocaleString(\'zh-CN\');\r\n};\r\n\r\nonMounted(() => {\r\n  fetchFeedbacks();\r\n});\r\n<\/script>\r\n\r\n<style scoped>\r\n.admin-layout {\r\n  display: flex;\r\n  min-height: 100vh;\r\n  background: var(--color-bg-base);\r\n}\r\n\r\n.admin-sidebar {\r\n  width: 250px;\r\n  background: var(--color-bg-card);\r\n  border-right: 1px solid var(--color-border);\r\n  padding: var(--spacing-lg);\r\n  position: fixed;\r\n  height: 100vh;\r\n  overflow-y: auto;\r\n}\r\n\r\n.admin-brand {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: var(--spacing-md);\r\n  padding: var(--spacing-lg);\r\n  margin-bottom: var(--spacing-xl);\r\n  color: var(--color-primary);\r\n}\r\n\r\n.admin-brand h2 {\r\n  font-size: 1.25rem;\r\n}\r\n\r\n.admin-main {\r\n  flex: 1;\r\n  margin-left: 250px;\r\n  padding: var(--spacing-2xl);\r\n}\r\n\r\n.admin-content {\r\n  max-width: 1400px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.page-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: var(--spacing-2xl);\r\n}\r\n\r\n.page-header h1 {\r\n  font-size: 2.5rem;\r\n}\r\n\r\n.feedback-preview {\r\n  color: var(--color-text-secondary);\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\n\r\n:deep(.new-feedback-row) {\r\n  background: rgba(239, 68, 68, 0.05);\r\n}\r\n\r\n.feedback-detail {\r\n  padding: var(--spacing-md);\r\n}\r\n\r\n.detail-row {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: var(--spacing-md);\r\n  margin-bottom: var(--spacing-md);\r\n  padding-bottom: var(--spacing-md);\r\n  border-bottom: 1px solid var(--color-border);\r\n}\r\n\r\n.detail-row label {\r\n  font-weight: 600;\r\n  color: var(--color-text-secondary);\r\n  min-width: 100px;\r\n}\r\n\r\n.detail-content {\r\n  margin-top: var(--spacing-lg);\r\n}\r\n\r\n.detail-content label {\r\n  display: block;\r\n  font-weight: 600;\r\n  color: var(--color-text-secondary);\r\n  margin-bottom: var(--spacing-md);\r\n}\r\n\r\n.content-html {\r\n  background: var(--color-bg-elevated);\r\n  padding: var(--spacing-lg);\r\n  border-radius: var(--radius-md);\r\n  line-height: 1.8;\r\n  color: var(--color-text-primary);\r\n  min-height: 100px;\r\n}\r\n\r\n.xss-warning {\r\n  margin-top: var(--spacing-lg);\r\n}\r\n\r\n.xss-warning p {\r\n  margin: var(--spacing-sm) 0;\r\n  font-size: 0.9rem;\r\n}\r\n</style>\r\n'],sourceRoot:""}]);const i=l}}]);
//# sourceMappingURL=455.94d7c41553ed08faceb7.js.map