{"version":3,"file":"455.94d7c41553ed08faceb7.js","mappings":"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","sources":["webpack://xss-blog-frontend-webpack/./src/pages/admin/FeedbackList.vue","webpack://xss-blog-frontend-webpack/./src/pages/admin/FeedbackList.vue?84a4","webpack://xss-blog-frontend-webpack/./src/pages/admin/FeedbackList.vue?f85d","webpack://xss-blog-frontend-webpack/./src/pages/admin/FeedbackList.vue?13b9"],"sourcesContent":["<template>\r\n  <div class=\"admin-layout\">\r\n    <aside class=\"admin-sidebar\">\r\n      <div class=\"admin-brand\">\r\n        <el-icon size=\"32\"><Tools /></el-icon>\r\n        <h2>管理后台</h2>\r\n      </div>\r\n      <el-menu\r\n        :default-active=\"activeMenu\"\r\n        router\r\n        background-color=\"#121826\"\r\n        text-color=\"#E2E8F0\"\r\n        active-text-color=\"#22D3EE\">\r\n        <el-menu-item index=\"/admin/dashboard\">\r\n          <el-icon><DataAnalysis /></el-icon>\r\n          <span>仪表盘</span>\r\n        </el-menu-item>\r\n        <el-menu-item index=\"/admin/feedbacks\">\r\n          <el-icon><ChatDotRound /></el-icon>\r\n          <span>反馈管理</span>\r\n        </el-menu-item>\r\n        <el-menu-item index=\"/\" divided>\r\n          <el-icon><HomeFilled /></el-icon>\r\n          <span>返回前台</span>\r\n        </el-menu-item>\r\n      </el-menu>\r\n    </aside>\r\n    \r\n    <main class=\"admin-main\">\r\n      <div class=\"admin-content\">\r\n        <div class=\"page-header\">\r\n          <h1>反馈管理</h1>\r\n          <span class=\"badge\" :class=\"configStore.xssMode === 'vuln' ? 'badge-vuln' : 'badge-secure'\">\r\n            {{ configStore.xssMode.toUpperCase() }} 模式\r\n          </span>\r\n        </div>\r\n        \r\n        <div v-if=\"!loading\" class=\"feedback-table\">\r\n          <el-table\r\n            :data=\"feedbacks\"\r\n            style=\"width: 100%\"\r\n            :row-class-name=\"getRowClassName\">\r\n            <el-table-column prop=\"id\" label=\"ID\" width=\"80\" />\r\n            <el-table-column prop=\"email\" label=\"邮箱\" width=\"220\" />\r\n            <el-table-column label=\"内容\" min-width=\"300\">\r\n              <template #default=\"{ row }\">\r\n                <div class=\"feedback-preview\">{{ getPreview(row.contentHtml) }}</div>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"status\" label=\"状态\" width=\"100\">\r\n              <template #default=\"{ row }\">\r\n                <el-tag :type=\"row.status === 'NEW' ? 'danger' : 'success'\">\r\n                  {{ row.status === 'NEW' ? '未读' : '已读' }}\r\n                </el-tag>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"提交时间\" width=\"180\">\r\n              <template #default=\"{ row }\">\r\n                {{ formatDate(row.createdAt) }}\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"操作\" width=\"120\">\r\n              <template #default=\"{ row }\">\r\n                <el-button type=\"primary\" size=\"small\" @click=\"viewFeedback(row)\">\r\n                  查看\r\n                </el-button>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </div>\r\n        \r\n        <div v-else class=\"loading\">\r\n          <div class=\"spinner\"></div>\r\n        </div>\r\n      </div>\r\n    </main>\r\n    \r\n    <!-- 反馈详情弹窗（场景 5 落点） -->\r\n    <el-dialog\r\n      v-model=\"showDetailDialog\"\r\n      title=\"反馈详情\"\r\n      width=\"700px\"\r\n      @close=\"currentFeedback = null\">\r\n      <div v-if=\"currentFeedback\" class=\"feedback-detail\">\r\n        <div class=\"detail-row\">\r\n          <label>邮箱：</label>\r\n          <span>{{ currentFeedback.email }}</span>\r\n        </div>\r\n        <div class=\"detail-row\">\r\n          <label>提交时间：</label>\r\n          <span>{{ formatDate(currentFeedback.createdAt) }}</span>\r\n        </div>\r\n        <div class=\"detail-row\">\r\n          <label>状态：</label>\r\n          <el-tag :type=\"currentFeedback.status === 'NEW' ? 'danger' : 'success'\">\r\n            {{ currentFeedback.status === 'NEW' ? '未读' : '已读' }}\r\n          </el-tag>\r\n        </div>\r\n        <div class=\"detail-content\">\r\n          <label>反馈内容：</label>\r\n          <!-- 盲 XSS（场景 5）渲染点 -->\r\n          <div \r\n            v-if=\"configStore.xssMode === 'vuln'\" \r\n            class=\"content-html\" \r\n            v-html=\"currentFeedback.contentHtml\">\r\n          </div>\r\n          <div \r\n            v-else \r\n            class=\"content-html\">\r\n            {{ currentFeedback.contentHtml }}\r\n          </div>\r\n        </div>\r\n        \r\n        <div v-if=\"configStore.xssMode === 'vuln'\" class=\"xss-warning\">\r\n          <el-alert\r\n            title=\"⚠️ XSS 盲点演示\"\r\n            type=\"warning\"\r\n            :closable=\"false\">\r\n            <p>此内容来自用户提交的反馈，在 VULN 模式下未经过滤直接渲染。</p>\r\n            <p>如果用户提交了恶意脚本，管理员查看时会触发 XSS（盲 XSS）。</p>\r\n          </el-alert>\r\n        </div>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\n// 管理后台 - 反馈列表与详情（场景 5：盲 XSS 落点）\r\nimport { ref, computed, onMounted } from 'vue';\r\nimport { useRoute } from 'vue-router';\r\nimport { useConfigStore } from '@/stores/config';\r\nimport { pure } from '@/utils/xss';\r\nimport axios from '@/api/axios';\r\nimport { ElMessage } from 'element-plus';\r\n\r\nconst route = useRoute();\r\nconst configStore = useConfigStore();\r\n\r\nconst feedbacks = ref([]);\r\nconst loading = ref(true);\r\nconst showDetailDialog = ref(false);\r\nconst currentFeedback = ref(null);\r\n\r\nconst activeMenu = computed(() => route.path);\r\n\r\nconst fetchFeedbacks = async () => {\r\n  try {\r\n    const response = await axios.get('/admin/feedbacks?page=0&size=50');\r\n    feedbacks.value = response.data.content || [];\r\n  } catch (error) {\r\n    console.error('Failed to fetch feedbacks:', error);\r\n    ElMessage.error('加载反馈失败');\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\nconst viewFeedback = async (feedback) => {\r\n  try {\r\n    const response = await axios.get(`/admin/feedbacks/${feedback.id}`);\r\n    currentFeedback.value = response.data;\r\n    showDetailDialog.value = true;\r\n    \r\n    // 刷新列表以更新『已读/未读』状态\r\n    await fetchFeedbacks();\r\n  } catch (error) {\r\n    console.error('Failed to fetch feedback detail:', error);\r\n    ElMessage.error('加载反馈详情失败');\r\n  }\r\n};\r\n\r\nconst getPreview = (html) => {\r\n  if (!html) return '';\r\n  const text = html.replace(/<[^>]*>/g, '');\r\n  return text.length > 100 ? text.substring(0, 100) + '...' : text;\r\n};\r\n\r\nconst getRowClassName = ({ row }) => {\r\n  return row.status === 'NEW' ? 'new-feedback-row' : '';\r\n};\r\n\r\nconst formatDate = (date) => {\r\n  if (!date) return '';\r\n  return new Date(date).toLocaleString('zh-CN');\r\n};\r\n\r\nonMounted(() => {\r\n  fetchFeedbacks();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.admin-layout {\r\n  display: flex;\r\n  min-height: 100vh;\r\n  background: var(--color-bg-base);\r\n}\r\n\r\n.admin-sidebar {\r\n  width: 250px;\r\n  background: var(--color-bg-card);\r\n  border-right: 1px solid var(--color-border);\r\n  padding: var(--spacing-lg);\r\n  position: fixed;\r\n  height: 100vh;\r\n  overflow-y: auto;\r\n}\r\n\r\n.admin-brand {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: var(--spacing-md);\r\n  padding: var(--spacing-lg);\r\n  margin-bottom: var(--spacing-xl);\r\n  color: var(--color-primary);\r\n}\r\n\r\n.admin-brand h2 {\r\n  font-size: 1.25rem;\r\n}\r\n\r\n.admin-main {\r\n  flex: 1;\r\n  margin-left: 250px;\r\n  padding: var(--spacing-2xl);\r\n}\r\n\r\n.admin-content {\r\n  max-width: 1400px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.page-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: var(--spacing-2xl);\r\n}\r\n\r\n.page-header h1 {\r\n  font-size: 2.5rem;\r\n}\r\n\r\n.feedback-preview {\r\n  color: var(--color-text-secondary);\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\n\r\n:deep(.new-feedback-row) {\r\n  background: rgba(239, 68, 68, 0.05);\r\n}\r\n\r\n.feedback-detail {\r\n  padding: var(--spacing-md);\r\n}\r\n\r\n.detail-row {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: var(--spacing-md);\r\n  margin-bottom: var(--spacing-md);\r\n  padding-bottom: var(--spacing-md);\r\n  border-bottom: 1px solid var(--color-border);\r\n}\r\n\r\n.detail-row label {\r\n  font-weight: 600;\r\n  color: var(--color-text-secondary);\r\n  min-width: 100px;\r\n}\r\n\r\n.detail-content {\r\n  margin-top: var(--spacing-lg);\r\n}\r\n\r\n.detail-content label {\r\n  display: block;\r\n  font-weight: 600;\r\n  color: var(--color-text-secondary);\r\n  margin-bottom: var(--spacing-md);\r\n}\r\n\r\n.content-html {\r\n  background: var(--color-bg-elevated);\r\n  padding: var(--spacing-lg);\r\n  border-radius: var(--radius-md);\r\n  line-height: 1.8;\r\n  color: var(--color-text-primary);\r\n  min-height: 100px;\r\n}\r\n\r\n.xss-warning {\r\n  margin-top: var(--spacing-lg);\r\n}\r\n\r\n.xss-warning p {\r\n  margin: var(--spacing-sm) 0;\r\n  font-size: 0.9rem;\r\n}\r\n</style>\r\n","import script from \"./FeedbackList.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./FeedbackList.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./FeedbackList.vue?vue&type=style&index=0&id=38f4392c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-38f4392c\"]])\n\nexport default __exports__","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[7].use[0]!./FeedbackList.vue?vue&type=style&index=0&id=38f4392c&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"1444211e\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[7].use[0]!./FeedbackList.vue?vue&type=style&index=0&id=38f4392c&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[7].use[0]!./FeedbackList.vue?vue&type=style&index=0&id=38f4392c&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `\n.admin-layout[data-v-38f4392c] {\r\n  display: flex;\r\n  min-height: 100vh;\r\n  background: var(--color-bg-base);\n}\n.admin-sidebar[data-v-38f4392c] {\r\n  width: 250px;\r\n  background: var(--color-bg-card);\r\n  border-right: 1px solid var(--color-border);\r\n  padding: var(--spacing-lg);\r\n  position: fixed;\r\n  height: 100vh;\r\n  overflow-y: auto;\n}\n.admin-brand[data-v-38f4392c] {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: var(--spacing-md);\r\n  padding: var(--spacing-lg);\r\n  margin-bottom: var(--spacing-xl);\r\n  color: var(--color-primary);\n}\n.admin-brand h2[data-v-38f4392c] {\r\n  font-size: 1.25rem;\n}\n.admin-main[data-v-38f4392c] {\r\n  flex: 1;\r\n  margin-left: 250px;\r\n  padding: var(--spacing-2xl);\n}\n.admin-content[data-v-38f4392c] {\r\n  max-width: 1400px;\r\n  margin: 0 auto;\n}\n.page-header[data-v-38f4392c] {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: var(--spacing-2xl);\n}\n.page-header h1[data-v-38f4392c] {\r\n  font-size: 2.5rem;\n}\n.feedback-preview[data-v-38f4392c] {\r\n  color: var(--color-text-secondary);\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\n}\n[data-v-38f4392c] .new-feedback-row {\r\n  background: rgba(239, 68, 68, 0.05);\n}\n.feedback-detail[data-v-38f4392c] {\r\n  padding: var(--spacing-md);\n}\n.detail-row[data-v-38f4392c] {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: var(--spacing-md);\r\n  margin-bottom: var(--spacing-md);\r\n  padding-bottom: var(--spacing-md);\r\n  border-bottom: 1px solid var(--color-border);\n}\n.detail-row label[data-v-38f4392c] {\r\n  font-weight: 600;\r\n  color: var(--color-text-secondary);\r\n  min-width: 100px;\n}\n.detail-content[data-v-38f4392c] {\r\n  margin-top: var(--spacing-lg);\n}\n.detail-content label[data-v-38f4392c] {\r\n  display: block;\r\n  font-weight: 600;\r\n  color: var(--color-text-secondary);\r\n  margin-bottom: var(--spacing-md);\n}\n.content-html[data-v-38f4392c] {\r\n  background: var(--color-bg-elevated);\r\n  padding: var(--spacing-lg);\r\n  border-radius: var(--radius-md);\r\n  line-height: 1.8;\r\n  color: var(--color-text-primary);\r\n  min-height: 100px;\n}\n.xss-warning[data-v-38f4392c] {\r\n  margin-top: var(--spacing-lg);\n}\n.xss-warning p[data-v-38f4392c] {\r\n  margin: var(--spacing-sm) 0;\r\n  font-size: 0.9rem;\n}\r\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/pages/admin/FeedbackList.vue\"],\"names\":[],\"mappings\":\";AAiMA;EACE,aAAa;EACb,iBAAiB;EACjB,gCAAgC;AAClC;AAEA;EACE,YAAY;EACZ,gCAAgC;EAChC,2CAA2C;EAC3C,0BAA0B;EAC1B,eAAe;EACf,aAAa;EACb,gBAAgB;AAClB;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,sBAAsB;EACtB,0BAA0B;EAC1B,gCAAgC;EAChC,2BAA2B;AAC7B;AAEA;EACE,kBAAkB;AACpB;AAEA;EACE,OAAO;EACP,kBAAkB;EAClB,2BAA2B;AAC7B;AAEA;EACE,iBAAiB;EACjB,cAAc;AAChB;AAEA;EACE,aAAa;EACb,8BAA8B;EAC9B,mBAAmB;EACnB,iCAAiC;AACnC;AAEA;EACE,iBAAiB;AACnB;AAEA;EACE,kCAAkC;EAClC,gBAAgB;EAChB,uBAAuB;EACvB,mBAAmB;AACrB;AAEA;EACE,mCAAmC;AACrC;AAEA;EACE,0BAA0B;AAC5B;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,sBAAsB;EACtB,gCAAgC;EAChC,iCAAiC;EACjC,4CAA4C;AAC9C;AAEA;EACE,gBAAgB;EAChB,kCAAkC;EAClC,gBAAgB;AAClB;AAEA;EACE,6BAA6B;AAC/B;AAEA;EACE,cAAc;EACd,gBAAgB;EAChB,kCAAkC;EAClC,gCAAgC;AAClC;AAEA;EACE,oCAAoC;EACpC,0BAA0B;EAC1B,+BAA+B;EAC/B,gBAAgB;EAChB,gCAAgC;EAChC,iBAAiB;AACnB;AAEA;EACE,6BAA6B;AAC/B;AAEA;EACE,2BAA2B;EAC3B,iBAAiB;AACnB\",\"sourcesContent\":[\"<template>\\r\\n  <div class=\\\"admin-layout\\\">\\r\\n    <aside class=\\\"admin-sidebar\\\">\\r\\n      <div class=\\\"admin-brand\\\">\\r\\n        <el-icon size=\\\"32\\\"><Tools /></el-icon>\\r\\n        <h2>管理后台</h2>\\r\\n      </div>\\r\\n      <el-menu\\r\\n        :default-active=\\\"activeMenu\\\"\\r\\n        router\\r\\n        background-color=\\\"#121826\\\"\\r\\n        text-color=\\\"#E2E8F0\\\"\\r\\n        active-text-color=\\\"#22D3EE\\\">\\r\\n        <el-menu-item index=\\\"/admin/dashboard\\\">\\r\\n          <el-icon><DataAnalysis /></el-icon>\\r\\n          <span>仪表盘</span>\\r\\n        </el-menu-item>\\r\\n        <el-menu-item index=\\\"/admin/feedbacks\\\">\\r\\n          <el-icon><ChatDotRound /></el-icon>\\r\\n          <span>反馈管理</span>\\r\\n        </el-menu-item>\\r\\n        <el-menu-item index=\\\"/\\\" divided>\\r\\n          <el-icon><HomeFilled /></el-icon>\\r\\n          <span>返回前台</span>\\r\\n        </el-menu-item>\\r\\n      </el-menu>\\r\\n    </aside>\\r\\n    \\r\\n    <main class=\\\"admin-main\\\">\\r\\n      <div class=\\\"admin-content\\\">\\r\\n        <div class=\\\"page-header\\\">\\r\\n          <h1>反馈管理</h1>\\r\\n          <span class=\\\"badge\\\" :class=\\\"configStore.xssMode === 'vuln' ? 'badge-vuln' : 'badge-secure'\\\">\\r\\n            {{ configStore.xssMode.toUpperCase() }} 模式\\r\\n          </span>\\r\\n        </div>\\r\\n        \\r\\n        <div v-if=\\\"!loading\\\" class=\\\"feedback-table\\\">\\r\\n          <el-table\\r\\n            :data=\\\"feedbacks\\\"\\r\\n            style=\\\"width: 100%\\\"\\r\\n            :row-class-name=\\\"getRowClassName\\\">\\r\\n            <el-table-column prop=\\\"id\\\" label=\\\"ID\\\" width=\\\"80\\\" />\\r\\n            <el-table-column prop=\\\"email\\\" label=\\\"邮箱\\\" width=\\\"220\\\" />\\r\\n            <el-table-column label=\\\"内容\\\" min-width=\\\"300\\\">\\r\\n              <template #default=\\\"{ row }\\\">\\r\\n                <div class=\\\"feedback-preview\\\">{{ getPreview(row.contentHtml) }}</div>\\r\\n              </template>\\r\\n            </el-table-column>\\r\\n            <el-table-column prop=\\\"status\\\" label=\\\"状态\\\" width=\\\"100\\\">\\r\\n              <template #default=\\\"{ row }\\\">\\r\\n                <el-tag :type=\\\"row.status === 'NEW' ? 'danger' : 'success'\\\">\\r\\n                  {{ row.status === 'NEW' ? '未读' : '已读' }}\\r\\n                </el-tag>\\r\\n              </template>\\r\\n            </el-table-column>\\r\\n            <el-table-column label=\\\"提交时间\\\" width=\\\"180\\\">\\r\\n              <template #default=\\\"{ row }\\\">\\r\\n                {{ formatDate(row.createdAt) }}\\r\\n              </template>\\r\\n            </el-table-column>\\r\\n            <el-table-column label=\\\"操作\\\" width=\\\"120\\\">\\r\\n              <template #default=\\\"{ row }\\\">\\r\\n                <el-button type=\\\"primary\\\" size=\\\"small\\\" @click=\\\"viewFeedback(row)\\\">\\r\\n                  查看\\r\\n                </el-button>\\r\\n              </template>\\r\\n            </el-table-column>\\r\\n          </el-table>\\r\\n        </div>\\r\\n        \\r\\n        <div v-else class=\\\"loading\\\">\\r\\n          <div class=\\\"spinner\\\"></div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </main>\\r\\n    \\r\\n    <!-- 反馈详情弹窗（场景 5 落点） -->\\r\\n    <el-dialog\\r\\n      v-model=\\\"showDetailDialog\\\"\\r\\n      title=\\\"反馈详情\\\"\\r\\n      width=\\\"700px\\\"\\r\\n      @close=\\\"currentFeedback = null\\\">\\r\\n      <div v-if=\\\"currentFeedback\\\" class=\\\"feedback-detail\\\">\\r\\n        <div class=\\\"detail-row\\\">\\r\\n          <label>邮箱：</label>\\r\\n          <span>{{ currentFeedback.email }}</span>\\r\\n        </div>\\r\\n        <div class=\\\"detail-row\\\">\\r\\n          <label>提交时间：</label>\\r\\n          <span>{{ formatDate(currentFeedback.createdAt) }}</span>\\r\\n        </div>\\r\\n        <div class=\\\"detail-row\\\">\\r\\n          <label>状态：</label>\\r\\n          <el-tag :type=\\\"currentFeedback.status === 'NEW' ? 'danger' : 'success'\\\">\\r\\n            {{ currentFeedback.status === 'NEW' ? '未读' : '已读' }}\\r\\n          </el-tag>\\r\\n        </div>\\r\\n        <div class=\\\"detail-content\\\">\\r\\n          <label>反馈内容：</label>\\r\\n          <!-- 盲 XSS（场景 5）渲染点 -->\\r\\n          <div \\r\\n            v-if=\\\"configStore.xssMode === 'vuln'\\\" \\r\\n            class=\\\"content-html\\\" \\r\\n            v-html=\\\"currentFeedback.contentHtml\\\">\\r\\n          </div>\\r\\n          <div \\r\\n            v-else \\r\\n            class=\\\"content-html\\\">\\r\\n            {{ currentFeedback.contentHtml }}\\r\\n          </div>\\r\\n        </div>\\r\\n        \\r\\n        <div v-if=\\\"configStore.xssMode === 'vuln'\\\" class=\\\"xss-warning\\\">\\r\\n          <el-alert\\r\\n            title=\\\"⚠️ XSS 盲点演示\\\"\\r\\n            type=\\\"warning\\\"\\r\\n            :closable=\\\"false\\\">\\r\\n            <p>此内容来自用户提交的反馈，在 VULN 模式下未经过滤直接渲染。</p>\\r\\n            <p>如果用户提交了恶意脚本，管理员查看时会触发 XSS（盲 XSS）。</p>\\r\\n          </el-alert>\\r\\n        </div>\\r\\n      </div>\\r\\n    </el-dialog>\\r\\n  </div>\\r\\n</template>\\r\\n\\r\\n<script setup>\\r\\n// 管理后台 - 反馈列表与详情（场景 5：盲 XSS 落点）\\r\\nimport { ref, computed, onMounted } from 'vue';\\r\\nimport { useRoute } from 'vue-router';\\r\\nimport { useConfigStore } from '@/stores/config';\\r\\nimport { pure } from '@/utils/xss';\\r\\nimport axios from '@/api/axios';\\r\\nimport { ElMessage } from 'element-plus';\\r\\n\\r\\nconst route = useRoute();\\r\\nconst configStore = useConfigStore();\\r\\n\\r\\nconst feedbacks = ref([]);\\r\\nconst loading = ref(true);\\r\\nconst showDetailDialog = ref(false);\\r\\nconst currentFeedback = ref(null);\\r\\n\\r\\nconst activeMenu = computed(() => route.path);\\r\\n\\r\\nconst fetchFeedbacks = async () => {\\r\\n  try {\\r\\n    const response = await axios.get('/admin/feedbacks?page=0&size=50');\\r\\n    feedbacks.value = response.data.content || [];\\r\\n  } catch (error) {\\r\\n    console.error('Failed to fetch feedbacks:', error);\\r\\n    ElMessage.error('加载反馈失败');\\r\\n  } finally {\\r\\n    loading.value = false;\\r\\n  }\\r\\n};\\r\\n\\r\\nconst viewFeedback = async (feedback) => {\\r\\n  try {\\r\\n    const response = await axios.get(`/admin/feedbacks/${feedback.id}`);\\r\\n    currentFeedback.value = response.data;\\r\\n    showDetailDialog.value = true;\\r\\n    \\r\\n    // 刷新列表以更新『已读/未读』状态\\r\\n    await fetchFeedbacks();\\r\\n  } catch (error) {\\r\\n    console.error('Failed to fetch feedback detail:', error);\\r\\n    ElMessage.error('加载反馈详情失败');\\r\\n  }\\r\\n};\\r\\n\\r\\nconst getPreview = (html) => {\\r\\n  if (!html) return '';\\r\\n  const text = html.replace(/<[^>]*>/g, '');\\r\\n  return text.length > 100 ? text.substring(0, 100) + '...' : text;\\r\\n};\\r\\n\\r\\nconst getRowClassName = ({ row }) => {\\r\\n  return row.status === 'NEW' ? 'new-feedback-row' : '';\\r\\n};\\r\\n\\r\\nconst formatDate = (date) => {\\r\\n  if (!date) return '';\\r\\n  return new Date(date).toLocaleString('zh-CN');\\r\\n};\\r\\n\\r\\nonMounted(() => {\\r\\n  fetchFeedbacks();\\r\\n});\\r\\n</script>\\r\\n\\r\\n<style scoped>\\r\\n.admin-layout {\\r\\n  display: flex;\\r\\n  min-height: 100vh;\\r\\n  background: var(--color-bg-base);\\r\\n}\\r\\n\\r\\n.admin-sidebar {\\r\\n  width: 250px;\\r\\n  background: var(--color-bg-card);\\r\\n  border-right: 1px solid var(--color-border);\\r\\n  padding: var(--spacing-lg);\\r\\n  position: fixed;\\r\\n  height: 100vh;\\r\\n  overflow-y: auto;\\r\\n}\\r\\n\\r\\n.admin-brand {\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  gap: var(--spacing-md);\\r\\n  padding: var(--spacing-lg);\\r\\n  margin-bottom: var(--spacing-xl);\\r\\n  color: var(--color-primary);\\r\\n}\\r\\n\\r\\n.admin-brand h2 {\\r\\n  font-size: 1.25rem;\\r\\n}\\r\\n\\r\\n.admin-main {\\r\\n  flex: 1;\\r\\n  margin-left: 250px;\\r\\n  padding: var(--spacing-2xl);\\r\\n}\\r\\n\\r\\n.admin-content {\\r\\n  max-width: 1400px;\\r\\n  margin: 0 auto;\\r\\n}\\r\\n\\r\\n.page-header {\\r\\n  display: flex;\\r\\n  justify-content: space-between;\\r\\n  align-items: center;\\r\\n  margin-bottom: var(--spacing-2xl);\\r\\n}\\r\\n\\r\\n.page-header h1 {\\r\\n  font-size: 2.5rem;\\r\\n}\\r\\n\\r\\n.feedback-preview {\\r\\n  color: var(--color-text-secondary);\\r\\n  overflow: hidden;\\r\\n  text-overflow: ellipsis;\\r\\n  white-space: nowrap;\\r\\n}\\r\\n\\r\\n:deep(.new-feedback-row) {\\r\\n  background: rgba(239, 68, 68, 0.05);\\r\\n}\\r\\n\\r\\n.feedback-detail {\\r\\n  padding: var(--spacing-md);\\r\\n}\\r\\n\\r\\n.detail-row {\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  gap: var(--spacing-md);\\r\\n  margin-bottom: var(--spacing-md);\\r\\n  padding-bottom: var(--spacing-md);\\r\\n  border-bottom: 1px solid var(--color-border);\\r\\n}\\r\\n\\r\\n.detail-row label {\\r\\n  font-weight: 600;\\r\\n  color: var(--color-text-secondary);\\r\\n  min-width: 100px;\\r\\n}\\r\\n\\r\\n.detail-content {\\r\\n  margin-top: var(--spacing-lg);\\r\\n}\\r\\n\\r\\n.detail-content label {\\r\\n  display: block;\\r\\n  font-weight: 600;\\r\\n  color: var(--color-text-secondary);\\r\\n  margin-bottom: var(--spacing-md);\\r\\n}\\r\\n\\r\\n.content-html {\\r\\n  background: var(--color-bg-elevated);\\r\\n  padding: var(--spacing-lg);\\r\\n  border-radius: var(--radius-md);\\r\\n  line-height: 1.8;\\r\\n  color: var(--color-text-primary);\\r\\n  min-height: 100px;\\r\\n}\\r\\n\\r\\n.xss-warning {\\r\\n  margin-top: var(--spacing-lg);\\r\\n}\\r\\n\\r\\n.xss-warning p {\\r\\n  margin: var(--spacing-sm) 0;\\r\\n  font-size: 0.9rem;\\r\\n}\\r\\n</style>\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["route","useRoute","configStore","useConfigStore","feedbacks","ref","loading","showDetailDialog","currentFeedback","activeMenu","computed","path","fetchFeedbacks","_ref","_asyncToGenerator","_regenerator","m","_callee","response","_t","w","_context","p","n","axios","get","v","value","data","content","console","error","ElMessage","f","a","apply","arguments","viewFeedback","_ref2","_callee2","feedback","_t2","_context2","concat","id","_x","getPreview","html","text","replace","length","substring","getRowClassName","_ref3","row","status","formatDate","date","Date","toLocaleString","onMounted","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_createVNode","_component_el_icon","size","_component_Tools","_component_el_menu","router","_component_el_menu_item","index","_component_DataAnalysis","_component_ChatDotRound","divided","_component_HomeFilled","_hoisted_4","_hoisted_5","_hoisted_6","class","_normalizeClass","_unref","xssMode","toUpperCase","_hoisted_9","_toConsumableArray","_cache","_hoisted_7","_component_el_table","style","_component_el_table_column","prop","label","width","default","_withCtx","_ref4","_hoisted_8","_toDisplayString","contentHtml","_ref5","_component_el_tag","type","_ref6","createdAt","_ref7","_component_el_button","onClick","$event","_createCommentVNode","_component_el_dialog","title","onClose","_hoisted_10","_hoisted_11","email","_hoisted_12","_hoisted_13","_hoisted_14","innerHTML","_hoisted_16","_hoisted_17","_component_el_alert","closable","__esModule","module","locals","exports","add","___CSS_LOADER_EXPORT___","push"],"sourceRoot":""}